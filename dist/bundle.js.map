{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/lib/Limelight.js","../src/index.js"],"sourcesContent":["function mergeOptions(defaultOptions = {}, userOptions = {}) {\n  return Object.keys(defaultOptions)\n    .reduce((obj, key) => (\n      Object.assign(obj, {\n        [key]: userOptions[key]\n          ? userOptions[key]\n          : defaultOptions[key],\n      })\n    ), {});\n}\n\nexport default {\n  mergeOptions,\n};\n","// @ts-check\nimport u from '../utils';\n\nclass Limelight {\n  constructor(target, options = {}) {\n    this.id = 'clipElem';\n\n    this.elems = {\n      // Handle querySelector or querySelectorAll\n      target: target.length > 1 ? Array.from(target) : [target],\n    };\n\n    this.options = u.mergeOptions(Limelight.defaultOptions, options);\n\n    this.init();\n  }\n\n  destroy() {\n    this.elems.limelight.parentNode.removeChild(this.elems.limelight);\n  }\n\n  createBGElem() {\n    const svgTemplate = this.renderSVG();\n    return document.createRange().createContextualFragment(svgTemplate);\n  }\n\n  /**\n   * Creates a string that represents gradient stop points.\n   * @return string\n   */\n  renderSVG() {\n    return `\n      <div class=\"limelight\" id=\"${this.id}\">\n        <svg height=\"100%\" width=\"100%\">\n          <defs>\n            <mask id=\"${this.id}-mask\">\n              <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\" />\n              ${this.elems.target.map((elem, i) => `\n                <rect class=\"${this.id}-window\" id=\"${this.id}-window-${i}\" x=\"0\" y=\"0\" width=\"0\" height=\"0\" fill=\"black\" />\n              `).join('')}\n            </mask>\n          </defs>\n          <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"black\" opacity=\"0.8\" style=\"mask: url('#${this.id}-mask'); pointer-events: none;\" />\n        </svg> \n      </div>\n    `;\n  }\n\n  reposition() {\n    this.elems.maskWindows.forEach((mask, i) => {\n      const pos = this.elems.target[i].getBoundingClientRect();\n      mask.setAttribute('x', pos.x - this.options.offset);\n      mask.setAttribute('y', pos.y - this.options.offset);\n      mask.setAttribute('width', pos.width + (this.options.offset * 2));\n      mask.setAttribute('height', pos.height + (this.options.offset * 2));\n    });\n  }\n\n  init() {\n    const svgElem = this.createBGElem();\n    this.elems.limelight = svgElem.querySelector(`#${this.id}`);\n    this.elems.maskWindows = Array.from(svgElem.querySelectorAll(`.${this.id}-window`));\n\n    document.body.appendChild(svgElem);\n\n    this.reposition();\n    this.bindListeners();\n  }\n\n  bindListeners() {\n    window.addEventListener('scroll', this.reposition.bind(this));\n  }\n}\n\nLimelight.defaultOptions = {\n  offset: 10,\n};\n\nexport default Limelight;\n","import Limelight from './lib/Limelight';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const boxGrad = new Limelight(document.querySelectorAll('.box__thing'));\n  console.log(boxGrad);\n});\n"],"names":[],"mappings":"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"}