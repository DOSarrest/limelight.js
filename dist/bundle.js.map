{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/lib/options.js","../src/lib/events/types/GenericEvent.js","../src/lib/events/types/CloseEvent.js","../src/lib/events/types/OpenEvent.js","../src/lib/events/types/RepositionEvent.js","../src/lib/events/EventEmitter.js","../src/lib/Implementation.js","../src/lib/Limelight.js","../src/index.js"],"sourcesContent":["function mergeOptions(defaultOptions = {}, userOptions = {}) {\n  return Object.keys(defaultOptions)\n    .reduce((obj, key) => (\n      Object.assign(obj, {\n        [key]: userOptions[key]\n          ? userOptions[key]\n          : defaultOptions[key],\n      })\n    ), {});\n}\n\nexport default {\n  mergeOptions,\n};\n","/**\n * @typedef {object} Options\n * @property {number} [offset]\n * @property {boolean} [closeOnClick]\n * @property {object} [classes]\n */\n\nconst options = {\n  offset: 10,\n  closeOnClick: true,\n  classes: {\n    window: 'limelight__window',\n    activeClass: 'limelight--is-active',\n  },\n};\n\nexport default options;\n","/**\n * The base 'event' class used by an EventEmitter.\n *\n * @class GenericEvent\n */\nclass GenericEvent {\n  /**\n   * @param {string} eventType - The 'type' that will be listened for.\n   * @param {object} payload - Any additional data.\n   */\n  constructor(eventType, payload = {}) {\n    this.type = eventType;\n    this.payload = payload;\n  }\n\n  /**\n   * @param {string} eventType\n   */\n  set type(eventType) {\n    // Do not allow re-assignment\n    if (this.eventType) return;\n    this.eventType = eventType;\n  }\n\n  /**\n   * @return string;\n   */\n  get type() {\n    if (!this.eventType) {\n      throw new Error('Not implemented.');\n    }\n\n    return this.eventType;\n  }\n}\n\nexport default GenericEvent;\n","import GenericEvent from './GenericEvent';\n\nclass CloseEvent extends GenericEvent {\n  constructor(...args) {\n    super('close', ...args);\n  }\n}\n\nexport default CloseEvent;\n","import GenericEvent from './GenericEvent';\n\n/**\n * Indicates the instance has opened.\n *\n * @class OpenEvent\n * @extends {GenericEvent}\n */\nclass OpenEvent extends GenericEvent {\n  constructor(...args) {\n    super('open', ...args);\n  }\n}\n\nexport default OpenEvent;\n","import GenericEvent from './GenericEvent';\n\nclass RepositionEvent extends GenericEvent {\n  constructor(...args) {\n    super('reposition', ...args);\n  }\n}\n\nexport default RepositionEvent;\n","import GenericEvent from './types/GenericEvent';\n\n/**\n * Allows registration of callbacks that will be triggered on specific events.\n *\n * @class EventEmitter\n */\nclass EventEmitter {\n  constructor() {\n    this.callbacks = {};\n  }\n\n  /**\n   * Used to listen for an event and fire a callback.\n   *\n   * @param {string} type - The event type, will need to match an existing type.\n   * @param {function} callback - The callback function to run.\n   */\n  on(type, callback) {\n    this.callbacks = Object.assign({}, this.callbacks, {\n      [type]: [...(this.callbacks[type] || []), callback],\n    });\n  }\n\n  /**\n   * Takes an event (e.g. Open) and fires the callbacks for it.\n   *\n   * @param {GenericEvent} event - The event type.\n   * @example emitter.trigger(new OpenEvent());\n   */\n  trigger(event) {\n    if (!(event instanceof GenericEvent)) {\n      console.error('Not a valid GenericEvent instance.', event);\n      return;\n    }\n\n    const callbacks = this.callbacks[event.type];\n\n    if (!callbacks) return;\n\n    callbacks.forEach((cb) => {\n      try {\n        cb(event);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n}\n\nexport default EventEmitter;\n","// @ts-check\nimport u from '../utils';\nimport defaultOptions from './options';\nimport CloseEvent from './events/types/CloseEvent';\nimport OpenEvent from './events/types/OpenEvent';\nimport RepositionEvent from './events/types/RepositionEvent';\nimport EventEmitter from './events/EventEmitter';\n\nclass Implementation {\n  /**\n   * @typedef {object} Options\n   * @property {number} [offset]\n   * @property {boolean} [closeOnClick]\n   * @property {object} [classes]\n   */\n\n  /**\n   * @param {(HTMLElement[]|HTMLElement)} target\n   * @param {Options} options\n   */\n  constructor(target, options = {}) {\n    this.id = 'clipElem';\n\n    this.emitter = new EventEmitter();\n\n    this.topOffset = window.pageYOffset;\n\n    this.elems = {\n      // Handle querySelector or querySelectorAll\n      target: Array.isArray(target) ? Array.from(target) : [target],\n    };\n\n    this.positions = [];\n\n    this.options = u.mergeOptions(defaultOptions, options);\n\n    this.isOpen = false;\n\n    this.on = this.on.bind(this);\n    this.open = this.open.bind(this);\n    this.refocus = this.refocus.bind(this);\n    this.close = this.close.bind(this);\n    this.reposition = this.reposition.bind(this);\n    this.repositionLoop = this.repositionLoop.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n\n    this.init();\n\n    this.caches = {\n      targetQuery: {\n        elems: undefined,\n        result: undefined,\n      },\n    };\n  }\n\n  /**\n   * Destroys the instance and cleans up.\n   *\n   * @public\n   */\n  destroy() {\n    if (this.loop) cancelAnimationFrame(this.loop);\n    this.elems.limelight.parentNode.removeChild(this.elems.limelight);\n  }\n\n  createBGElem() {\n    const svgTemplate = this.renderSVG();\n    return document.createRange().createContextualFragment(svgTemplate);\n  }\n\n  /**\n   * Creates a string that represents gradient stop points.\n   * @return string\n   */\n  renderSVG() {\n    return `\n      <div class=\"limelight\" id=\"${this.id}\" aria-hidden>\n        ${this.elems.target.map((elem, i) => `\n          <div class=\"${this.id}-window limelight__window\" id=\"${this.id}-window-${i}\"></div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  /**\n   * Resets the position on the windows.\n   *\n   * @public\n   */\n  reposition() {\n    this.emitter.trigger(new RepositionEvent());\n\n    this.elems.maskWindows.forEach((mask, i) => {\n      const first = this.calculateOffsets(this.elems.target[i].getBoundingClientRect());\n\n      mask.style.left = `${first.left}px`;\n      mask.style.top = `${first.top}px`;\n      mask.style.width = `${first.width}px`;\n      mask.style.height = `${first.height}px`;\n\n      const last = this.calculateOffsets(this.elems.target[i].getBoundingClientRect());\n\n      // Invert: determine the delta between the \n      // first and last bounds to invert the element\n      const deltaX = first.left - last.left;\n      const deltaY = first.top - last.top;\n      const deltaW = first.width / last.width;\n      const deltaH = first.height / last.height;\n\n      mask.style.transformOrigin = 'top left';\n      mask.style.transform = `translate(${deltaX}px, ${deltaY}px) scale(${deltaW}, ${deltaH})`;\n\n      this.elems.target[i].getBoundingClientRect();\n\n      mask.style.transition = 'all 3s';\n      mask.style.transform = '';\n    });\n  }\n\n  /**\n   * Takes a position object and adjusts it to accomodate optional offset.\n   *\n   * @private\n   * @param {object} position - The result of getClientBoundingRect()\n   */\n  calculateOffsets(position) {\n    const { offset } = this.options;\n    const {\n      left,\n      top,\n      width,\n      height,\n    } = position;\n\n    return {\n      left: left - offset,\n      top: top - offset,\n      width: width + (offset * 2),\n      height: height + (offset * 2),\n    };\n  }\n\n  repositionLoop() {\n    if (this.topOffset !== window.pageYOffset) {\n      this.reposition();\n    }\n\n    this.topOffset = window.pageYOffset;\n\n    this.loop = requestAnimationFrame(this.repositionLoop);\n  }\n\n  init() {\n    const svgElem = this.createBGElem();\n    this.elems.limelight = svgElem.querySelector(`#${this.id}`);\n    this.elems.maskWindows = Array.from(svgElem.querySelectorAll(`.${this.id}-window`));\n\n    document.body.appendChild(svgElem);\n\n    this.reposition();\n  }\n\n  open(e) {\n    if (this.isOpen) return;\n\n    this.isOpen = true;\n\n    // If it looks like an event, try to stop it bubbling.\n    if (e && e.target) {\n      e.stopPropagation();\n    }\n\n    this.elems.limelight.classList.add(this.options.classes.activeClass);\n\n    this.emitter.trigger(new OpenEvent());\n\n    // If we don't encourage the listener to happen on next-tick,\n    // we'll end up with the listener firing for this if it was triggered on-click.\n    // This is safeguard for when the event is not passed in and thus propgation\n    // can't be stopped.\n    requestAnimationFrame(() => {\n      document.addEventListener('click', this.handleClick);\n\n      this.loop = this.repositionLoop();\n    });\n  }\n\n  get targetQuery() {\n    if (this.caches.targetQuery.elems !== this.elems.target) {\n      this.caches.targetQuery.elems = this.elems.target;\n\n      this.caches.targetQuery.result = this.elems.target.reduce((str, elem) => {\n        const id = elem.id ? `#${elem.id}` : '';\n        const classes = [...elem.classList].map(x => `.${x}`).join('');\n        return `${str} ${id}${classes}`;\n      }, '');\n    }\n\n    return this.caches.targetQuery.result;\n  }\n\n  handleClick(e) {\n    if (!this.options.closeOnClick) return;\n\n    if (!e.target.matches(this.targetQuery)) {\n      this.close();\n    }\n  }\n\n  close() {\n    if (!this.isOpen) return;\n\n    this.isOpen = false;\n\n    this.elems.limelight.classList.remove(this.options.classes.activeClass);\n\n    this.emitter.trigger(new CloseEvent());\n\n    document.removeEventListener('click', this.handleClick);\n\n    cancelAnimationFrame(this.loop);\n  }\n\n  /**\n   * Passes through the event to the emitter.\n   *\n   * @public\n   * @param {GenericEvent} event\n   * @param {function} callback\n   */\n  on(event, callback) {\n    this.emitter.on(event, callback);\n  }\n\n  refocus(target) {\n    this.elems.target = target.length > 1 ? Array.from(target) : [target];\n    // cancelAnimationFrame(this.loop);\n    this.reposition();\n  }\n}\n\nexport default Implementation;\n","// @ts-check\nimport Implementation from './Implementation';\n\nconst publicAPI = ['on', 'open', 'refocus', 'destroy', 'reposition'];\n\nclass Limelight {\n  constructor(target, options) {\n    const implementation = new Implementation(target, options);\n\n    publicAPI.forEach((prop) => {\n      this[prop] = implementation[prop];\n    });\n  }\n}\n\nexport default Limelight;\n","import Limelight from './lib/Limelight';\n\nexport default Limelight;\n\n// document.addEventListener('DOMContentLoaded', () => {\n//   // const targets = document.querySelectorAll('.box__thing');\n//   const targets = document.querySelector('.box__thing');\n//   const boxGrad = new Limelight(targets);\n\n//   document.querySelector('.js-start').addEventListener('click', (e) => {\n//     e.stopPropagation();\n//     e.preventDefault();\n//     boxGrad.open();\n//   });\n\n//   boxGrad.on('open', (e) => {\n//     console.log('opening', e);\n//   });\n\n//   boxGrad.on('close', (e) => {\n//     console.log('closing', e);\n//   });\n\n//   boxGrad.on('reposition', (e) => {\n//     console.log('repositioning', e);\n//   });\n\n\n//   setTimeout(() => {\n//     boxGrad.refocus(document.querySelector('.other-thing'));\n//   }, 2000);\n\n//   // targets.forEach(target => {\n//   //   target.addEventListener('open', () => {\n//   //     console.log('we are opening');\n//   //   });\n//   //   target.addEventListener('close', () => {\n//   //     console.log('we are closing');\n//   //   });\n//   // })\n\n//   console.log(boxGrad);\n// });\n"],"names":["options","defaultOptions"],"mappings":";;;;;;EAAA,SAAS,YAAY,CAAC,cAAc,GAAG,EAAE,EAAE,WAAW,GAAG,EAAE,EAAE;EAC7D,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;EACpC,KAAK,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG;EACrB,MAAM,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE;EACzB,QAAQ,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC;EAC/B,YAAY,WAAW,CAAC,GAAG,CAAC;EAC5B,YAAY,cAAc,CAAC,GAAG,CAAC;EAC/B,OAAO,CAAC;EACR,KAAK,EAAE,EAAE,CAAC,CAAC;EACX,CAAC;;AAED,UAAe;EACf,EAAE,YAAY;EACd,CAAC,CAAC;;ECbF;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAM,OAAO,GAAG;EAChB,EAAE,MAAM,EAAE,EAAE;EACZ,EAAE,YAAY,EAAE,IAAI;EACpB,EAAE,OAAO,EAAE;EACX,IAAI,MAAM,EAAE,mBAAmB;EAC/B,IAAI,WAAW,EAAE,sBAAsB;EACvC,GAAG;EACH,CAAC,CAAC;;ECdF;EACA;EACA;EACA;EACA;EACA,MAAM,YAAY,CAAC;EACnB;EACA;EACA;EACA;EACA,EAAE,WAAW,CAAC,SAAS,EAAE,OAAO,GAAG,EAAE,EAAE;EACvC,IAAI,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;EAC1B,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;EAC3B,GAAG;;EAEH;EACA;EACA;EACA,EAAE,IAAI,IAAI,CAAC,SAAS,EAAE;EACtB;EACA,IAAI,IAAI,IAAI,CAAC,SAAS,EAAE,OAAO;EAC/B,IAAI,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;EAC/B,GAAG;;EAEH;EACA;EACA;EACA,EAAE,IAAI,IAAI,GAAG;EACb,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;EACzB,MAAM,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;EAC1C,KAAK;;EAEL,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC;EAC1B,GAAG;EACH,CAAC;;EChCD,MAAM,UAAU,SAAS,YAAY,CAAC;EACtC,EAAE,WAAW,CAAC,GAAG,IAAI,EAAE;EACvB,IAAI,KAAK,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;EAC5B,GAAG;EACH,CAAC;;ECJD;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,SAAS,SAAS,YAAY,CAAC;EACrC,EAAE,WAAW,CAAC,GAAG,IAAI,EAAE;EACvB,IAAI,KAAK,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC;EAC3B,GAAG;EACH,CAAC;;ECVD,MAAM,eAAe,SAAS,YAAY,CAAC;EAC3C,EAAE,WAAW,CAAC,GAAG,IAAI,EAAE;EACvB,IAAI,KAAK,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,CAAC;EACjC,GAAG;EACH,CAAC;;ECJD;EACA;EACA;EACA;EACA;EACA,MAAM,YAAY,CAAC;EACnB,EAAE,WAAW,GAAG;EAChB,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;EACxB,GAAG;;EAEH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAE;EACrB,IAAI,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE;EACvD,MAAM,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,QAAQ,CAAC;EACzD,KAAK,CAAC,CAAC;EACP,GAAG;;EAEH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,CAAC,KAAK,EAAE;EACjB,IAAI,IAAI,EAAE,KAAK,YAAY,YAAY,CAAC,EAAE;EAC1C,MAAM,OAAO,CAAC,KAAK,CAAC,oCAAoC,EAAE,KAAK,CAAC,CAAC;EACjE,MAAM,OAAO;EACb,KAAK;;EAEL,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;;EAEjD,IAAI,IAAI,CAAC,SAAS,EAAE,OAAO;;EAE3B,IAAI,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK;EAC9B,MAAM,IAAI;EACV,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC;EAClB,OAAO,CAAC,OAAO,CAAC,EAAE;EAClB,QAAQ,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;EACzB,OAAO;EACP,KAAK,CAAC,CAAC;EACP,GAAG;EACH,CAAC;;EChDD;AACA,AAMA;EACA,MAAM,cAAc,CAAC;EACrB;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA,EAAE,WAAW,CAAC,MAAM,EAAEA,UAAO,GAAG,EAAE,EAAE;EACpC,IAAI,IAAI,CAAC,EAAE,GAAG,UAAU,CAAC;;EAEzB,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,YAAY,EAAE,CAAC;;EAEtC,IAAI,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC;;EAExC,IAAI,IAAI,CAAC,KAAK,GAAG;EACjB;EACA,MAAM,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC;EACnE,KAAK,CAAC;;EAEN,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;;EAExB,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,YAAY,CAACC,OAAc,EAAED,UAAO,CAAC,CAAC;;EAE3D,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;EAExB,IAAI,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACjC,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACrC,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC3C,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACvC,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACjD,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACzD,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;EAEnD,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;;EAEhB,IAAI,IAAI,CAAC,MAAM,GAAG;EAClB,MAAM,WAAW,EAAE;EACnB,QAAQ,KAAK,EAAE,SAAS;EACxB,QAAQ,MAAM,EAAE,SAAS;EACzB,OAAO;EACP,KAAK,CAAC;EACN,GAAG;;EAEH;EACA;EACA;EACA;EACA;EACA,EAAE,OAAO,GAAG;EACZ,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACnD,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;EACtE,GAAG;;EAEH,EAAE,YAAY,GAAG;EACjB,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;EACzC,IAAI,OAAO,QAAQ,CAAC,WAAW,EAAE,CAAC,wBAAwB,CAAC,WAAW,CAAC,CAAC;EACxE,GAAG;;EAEH;EACA;EACA;EACA;EACA,EAAE,SAAS,GAAG;EACd,IAAI,OAAO,CAAC;iCACqB,EAAE,IAAI,CAAC,EAAE,CAAC;QACnC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;sBACxB,EAAE,IAAI,CAAC,EAAE,CAAC,+BAA+B,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC7E,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;IAEhB,CAAC,CAAC;EACN,GAAG;;EAEH;EACA;EACA;EACA;EACA;EACA,EAAE,UAAU,GAAG;EACf,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,eAAe,EAAE,CAAC,CAAC;;EAEhD,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,KAAK;EAChD,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC,CAAC;;EAExF,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;EAC1C,MAAM,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;EACxC,MAAM,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;EAC5C,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;;EAE9C,MAAM,MAAM,IAAI,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC,CAAC;;EAEvF;EACA;EACA,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;EAC5C,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;EAC1C,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;EAC9C,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;EAEhD,MAAM,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,UAAU,CAAC;EAC9C,MAAM,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;;EAE/F,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC;;EAEnD,MAAM,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;EACvC,MAAM,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;EAChC,KAAK,CAAC,CAAC;EACP,GAAG;;EAEH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,gBAAgB,CAAC,QAAQ,EAAE;EAC7B,IAAI,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;EACpC,IAAI,MAAM;EACV,MAAM,IAAI;EACV,MAAM,GAAG;EACT,MAAM,KAAK;EACX,MAAM,MAAM;EACZ,KAAK,GAAG,QAAQ,CAAC;;EAEjB,IAAI,OAAO;EACX,MAAM,IAAI,EAAE,IAAI,GAAG,MAAM;EACzB,MAAM,GAAG,EAAE,GAAG,GAAG,MAAM;EACvB,MAAM,KAAK,EAAE,KAAK,IAAI,MAAM,GAAG,CAAC,CAAC;EACjC,MAAM,MAAM,EAAE,MAAM,IAAI,MAAM,GAAG,CAAC,CAAC;EACnC,KAAK,CAAC;EACN,GAAG;;EAEH,EAAE,cAAc,GAAG;EACnB,IAAI,IAAI,IAAI,CAAC,SAAS,KAAK,MAAM,CAAC,WAAW,EAAE;EAC/C,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;EACxB,KAAK;;EAEL,IAAI,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC;;EAExC,IAAI,IAAI,CAAC,IAAI,GAAG,qBAAqB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;EAC3D,GAAG;;EAEH,EAAE,IAAI,GAAG;EACT,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;EACxC,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChE,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;;EAExF,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;;EAEvC,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;EACtB,GAAG;;EAEH,EAAE,IAAI,CAAC,CAAC,EAAE;EACV,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,OAAO;;EAE5B,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;EAEvB;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE;EACvB,MAAM,CAAC,CAAC,eAAe,EAAE,CAAC;EAC1B,KAAK;;EAEL,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;;EAEzE,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,SAAS,EAAE,CAAC,CAAC;;EAE1C;EACA;EACA;EACA;EACA,IAAI,qBAAqB,CAAC,MAAM;EAChC,MAAM,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;;EAE3D,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;EACxC,KAAK,CAAC,CAAC;EACP,GAAG;;EAEH,EAAE,IAAI,WAAW,GAAG;EACpB,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;EAC7D,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;;EAExD,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK;EAC/E,QAAQ,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC;EAChD,QAAQ,MAAM,OAAO,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;EACvE,QAAQ,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;EACxC,OAAO,EAAE,EAAE,CAAC,CAAC;EACb,KAAK;;EAEL,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC;EAC1C,GAAG;;EAEH,EAAE,WAAW,CAAC,CAAC,EAAE;EACjB,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,OAAO;;EAE3C,IAAI,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;EAC7C,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC;EACnB,KAAK;EACL,GAAG;;EAEH,EAAE,KAAK,GAAG;EACV,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO;;EAE7B,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;EAExB,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;;EAE5E,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,UAAU,EAAE,CAAC,CAAC;;EAE3C,IAAI,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;;EAE5D,IAAI,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACpC,GAAG;;EAEH;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE;EACtB,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;EACrC,GAAG;;EAEH,EAAE,OAAO,CAAC,MAAM,EAAE;EAClB,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;EAC1E;EACA,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;EACtB,GAAG;EACH,CAAC;;EChPD;AACA,AACA;EACA,MAAM,SAAS,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;;EAErE,MAAM,SAAS,CAAC;EAChB,EAAE,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE;EAC/B,IAAI,MAAM,cAAc,GAAG,IAAI,cAAc,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;;EAE/D,IAAI,SAAS,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK;EAChC,MAAM,IAAI,CAAC,IAAI,CAAC,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;EACxC,KAAK,CAAC,CAAC;EACP,GAAG;EACH,CAAC;;ECTD;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;;EAGA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA,MAAM;;;;;;;;"}